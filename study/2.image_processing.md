# 1. 디지털 영상이란?

## 샘플링과 양자화 

2차원 공간 영상을 M x N 으로 샘플링 

명암을 L 단계로 quantization (L을 명암 단계라고 부른다. 즉, 명암은 [0, L-1] 사이에 분포

아래 그림 예) M = 12, N = 12, L = 10 인 경우

![image](https://user-images.githubusercontent.com/23207379/51421353-5ab5d100-1be0-11e9-9252-f540378d2559.png)

## 좌표계 (Coordinate System)

영상 geometry에는 크게 4가지 좌표계가 존재한다. (월드좌표계, 카메라좌표계,정규좌표계,픽셀좌표계)

![image](https://user-images.githubusercontent.com/23207379/51421425-87b6b380-1be1-11e9-9c85-8a4bc4236281.png)

### 월드 좌표계

우리가 사물(물체)의 위치를 표현할 때 기준으로 삼는 좌표계이다. 즉, 문제에 따라서 우리가 임의로 잡아서 사용할 수 있는 좌표계다. 

### 카메라 좌표계

카메라를 기준으로 한 좌표계로 아래 그림과 같이 카메라의 초점(렌즈의 중심)을 원점, 카메라의 정면 광학축 방향을 Z축, 카메라 아래쪽 방향을 Y축, 오른쪽 방향을 X축으로 잡는다.

![image](https://user-images.githubusercontent.com/23207379/51421460-0dd2fa00-1be2-11e9-999f-82b372e4f416.png)

### 픽셀 좌표계

영상좌표계(Image Coordinate System)라고 불리는 픽셀 좌표계는 우리가 실제 눈으로 보는 영상에 대한 좌표계로서 이미지의 왼쪽 상단 모서리를 원점, 오른쪽 방향을 x축 증가방향 아래쪽 방향을 y축 증가방향으로 하고 x,y축에 의해 결정되는 평면을 이미지 평면이라 부른다.

### 정규 좌표계

편의상 도입된 가상의 좌표계로, 한마디로 설명하자면 카메라의 내부 파라미터(intrinsic parameter)의 영향을 제거한 이미지 좌표계다. 즉, 좌표계의 단위를 없앤 (정규화된) 좌표계이며 카메라 초점과의 거리가 1인 가상의 이미지 평면을 정의하는 좌표계이다.

그렇다면 굳이 정규 이미지 평면과 정규 좌표계를 도입한 이유는 뭘까? 우리가 동일한 장면을 동일한 위치와 동일한 각도에서 찍더라도 사용한 카메라에 따라서 또는 카메라 세팅에 따라서 서로 다른 영상을 얻게 된다. 그런데, 이러한 카메라 간의 차이는 어떤 일관된 기하학적인 해석을 하는데 있어서 불필요한 요소일 것이다. 따라서, 이러한 요소를 제거한 정규화된 이미지 평면에서 공통된 기하학적 특성을 분석하고 이론을 수립하는 것이 보다 효과적이다.

---

## Homogeneous Coordinates

http://blog.daum.net/shksjy/229 
http://darkpgmr.tistory.com/78?category=460965

---

2. 히스토그램

## 히스토그램이란?

영상의 밝기값의 빈도분포표

3. 이진 영상

## 이진화란?

명암 영상을 흑과 백만 가진 이진 영상으로 변환

### 전역 고정 이진화(Global fixed thresholding)

영상처리에서 이진화는 어떤 주어진 임계값(threshold)보다 밝은 픽셀들은 모두 흰색으로, 그렇지 않은 픽셀들은 모두 검은색으로 바꾸는 것을 지칭한다.

![image](https://user-images.githubusercontent.com/23207379/51421877-03682e80-1be9-11e9-9700-8c10e3cba317.png)

이진화의 핵심은 threshold를 어떻게 자동으로 결정할 것인가이다. 실제 입력 영상의 밝기 분포를 보고 임계값을 찾아주는 가장 실질적인 방법으로 Otzu 방법이 있 다. 이 방법은 threshold를 기준으로 영상 픽셀들을 두 클래스로 분류했을 때 두 클래스간의 intra-class variance를 최소화하거나 또는 inter-class variance를 최대화하는 T를 찾는 이진화 방법이다.

입력 영상에서 임계값 T보다 어두운 픽셀들의 비율을 α, 밝기 평균을 μ1, 분산을 σ12, T보다 밝은 픽셀들의 비율을 β, 밝기 평균을 μ2, 분산을 σ22라 했을 때 (α+β=1), intra-class 분산과 inter-class 분산은 각각 다음과 같이 계산된다.

intra-class variance = ασ12+βσ22     --- (1)

inter-class variance = αβ(μ1-μ2)2     --- (2)

식 (1)을 최소화시키는 것은 식 (2)를 최대화시키는 것과 동일하며 둘 중 어느 기준을 사용해도 무방하지만 계산상으로는 식 (2)를 최대화시키는 것이 효율적이다. Otsu의 이진화 알고리즘은 임계값 T를 0 부터 255까지 단계적으로 변화시키면서 식 (2)를 계산하고 식 (2)가 최대가 되는 T 값을 찾아서 영상을 이진화하는 방법이다.

### 지역 가변 이진화 1

배경의 밝기 변화를 일차 평면을 이용하여 근사하여 제거, 이후 global thresholding을 적용

![image](https://user-images.githubusercontent.com/23207379/51434257-f6f2dd00-1c9f-11e9-9733-c9a997fdd5e5.png)
![image](https://user-images.githubusercontent.com/23207379/51434264-07a35300-1ca0-11e9-940b-1060501b1c0b.png)

### 지역 가변 이진화 2 (adaptive thresholding)

adaptive thresholding : 영상의 모든 픽셀 마다 다른 threshold를 사용하는데, 그 threshold 값은 그 픽셀을 중심으로 한 n x n 주변 영역의 밝기 평균에 일정한 상수를 빼서 결정한다.

### Hysteresis thresholding

Canny edge 검출기에서는 입력 영상에 대해 먼저 Sobel 필터를 적용하여 각 픽셀에 대한 edginess를 계산한 후 다음과 같은 hysteresis thresholding 과정을 거쳐 최종적인 edge 픽셀 여부를 결정한다.

1. high threshold와 low threshold의 두 개의 threshold 값이 존재하며 high threshold 이상의 edginess를 갖는 픽셀들은 무조건 edge 픽셀로 분류한다.

2. low와 high 사이에 있으면서 이미 edge로 분류된 픽셀들과 연결되어(인접해) 있으면 edge 픽셀로 분류한다.

3. 나머지 픽셀들(low threshold 이하이거나 high threshold 이하이면서 edge 픽셀과 연결되어 있지 않은 경우)은 모두 non edge 픽셀로 분류한다.

즉, hysteresis thresholding의 요점은 판단이 확실한 경우(low threshold 이하 또는 high threshold 이상)에는 그대로 이진화를 하되, 그 판단이 불확실한 경우에는 주변 상황을 보고 결정을 하는 것이다.

### 시간축이 고려된 이진화 문제

high와 low의 두 개의 임계값을 정해놓고 어떤 대상의 분류가 바뀌는 데에는 보다 엄격한 기준을 적용하는 것이다. 만일 어떤 대상의 관측값이 임계값 이하여서 A 클래스로 분류되었다고 하자. 이후 대상의 관측값이 high threshold 이하인 경우에는 계속 A 클래스로 분류하되, high threshold를 넘어서면 B 클래스로 분류를 바꾼다. 그리고 일단 B가 된 이후에는 관측값이 low threshold보다 낮게 나타난 경우에만 A로 분류를 변경하는 방식이다. 즉, 분류의 경계를 넘나들 때에는 그 방향에 따라서 서로 다른 문턱값을 적용하는 방식이다.

## 연결요소

![image](https://user-images.githubusercontent.com/23207379/51434449-94034500-1ca3-11e9-9545-00251570c693.png)



# 4. 영상처리의 세 가지 기본 연산

## 점 연산

오직 자신의 명암값에 따라 새로운 값 결정

## 영역 연산

이웃 화소의 명암값에 따라 새로운 값 결정

Convolution 

![image](https://user-images.githubusercontent.com/23207379/51434523-d168d200-1ca5-11e9-8afc-22316332d920.png)

## 기하 연산

### transformation (변환)

점 x를 점 x'에 매핑하는 함수를 transformation이라고 한다.

![image](https://user-images.githubusercontent.com/23207379/51434577-8059dd80-1ca7-11e9-9e78-5cd332d5607b.png)

변환에는 다양한 종류가 있다. 분류의 기준은 변환된 후 그 물체의 특성이 어느 정도까지 보존되는가에 따른 것이다.

#### 강체 변환 (rigid-body)

변환 하기 전의 속성(크기, 각고)을 그대로 가진다. 

![image](https://user-images.githubusercontent.com/23207379/51434585-e6466500-1ca7-11e9-8282-2e78d74ab6f3.png)

#### 유사 변환 (similarity)

변환 하기 전의 모양과 유사하게 되는 것이다. 즉 크기가 달라지더라도 등방성으로 달라진다면 원래의 물체라고 할 수 있다. 이 경우에는 각도만 보존된다.

![image](https://user-images.githubusercontent.com/23207379/51434600-30c7e180-1ca8-11e9-91b2-0579df54c96c.png)

#### 선형 변환 (linear)

#### Affine 변환

선형 변환에서 이동변환까지 포함 

#### 원근 변환 (projective)

이것은 선만 보존되는 변환이다. 각도도 바뀐다. 단지 선의 성질은 보존되어 곡선으로 되지는 않는다. 이 변환은 원근감을 표현하기 위해 필요한 변환이며, 입체를 평면이 투영할때도 꼭 필요한 변환이다.

# 5. 다해상도

# 6. 모폴로지

## 이진 모폴로지

## 명암 모폴로지

# 7. 컬러

![image](https://user-images.githubusercontent.com/23207379/51434830-02003a00-1cad-11e9-8dad-86e920a83527.png)

## RGB

RGB 모델은 가장 기보적인 색상모델로서 색(color)을 Red, Green, Blue의 3가지 성분의 조합으로 생각하는 것이다. RGB 모델에서 검은색은 R=G=B=0, 흰색은 R=G=B=255, 빨강색은 R=255, G=B=0, 노란색은 R=G=255, B=0로 표현된다. R=G=B인 경우는 무채색인 Gray 색상이 된다. R, G, B 각각은 0 ~ 255 사이의 값을 가질 수 있기 때문에 RGB 색상 모델을 사용하면 총 256*256*256 = 16,777,216가지의 색을 표현할 수 있다.

## HSV

HSV 모델은 Hue(색조), Saturation(채도), Value(명도)의 3가지 성분으로 색을 표현한다. Hue는 색조(예: 붉은색 계열인지 푸른색 계열인지, ...)를, Saturation은 그 색이 얼마나 선명한(순수한) 색인지를, Value는 밝기(intensity)를 나타낸다. HSV 모델은 우리가 색을 가장 직관적으로 표현할 수 있는 모델이며 또한 머리속에서 상상하는 색을 가장 쉽게 만들어낼 수 있는 모델이다. 영상처리/영상인식에서 HSV 모델을 사용할 때, H, S, V 각각은 0 ~ 255 사이의 값으로 표현된다. H 값은 색의 종류를 나타내기 때문에 크기는 의미가 없으며 단순한 인덱스(index)를 나타낸다. S 값은 0이면 무채색(gray 색), 255면 가장 선명한(순수한) 색임을 나타낸다. V 값은 작을수록 어둡고 클수록 밝은 색임을 나타낸다. HSV 색상 모델은 그림과 같이 원뿔(conic) 형태, 원기둥(cylindric) 형태가 있다. 둘의 차이는 색의 차이(difference)를 정량적으로 수치화하는 파트에서 설명하겠다.

## YCVCr

YCbCr 모델은 RGB 색에서 밝기성분(Y)과 색차정보(Cb, Cr)를 분리하여 표현하는 색상모델이다. 위 5번째 그림은 위키페디아에 있는 그림으로  Y=128일 때의 CbCr 색상평면이다. 디지털 영상에서 Y, Cb, Cr은 각각 0 ~ 255 사이의 값을 가지며 Y가 커지면 위 그림이 전체적으로 밝아지고 Y가 작아지면 전체적으로 어두워진다. YCbCr 모델은 mpeg에서 사용되는 색상모델로서 인간의 눈이 밝기차에는 민감하지만 색차에는 상대적으로 둔감하다는 점을 이용해서 Y에는 많은 비트수(해상도)를 할당하고 Cb, Cr에는 낮은 비트수를 할당하는 방식으로 비디오를 압축한다. 따라서 비디오 데이터를 처리할 경우에 YCbCr 모델을 사용하면 별도의 색상변환을 하지 않아도 되는 장점을 갖는다. YCbCr 모델은 YUV 모델로도 불린다.

## 색차

## 



---

출처 

- 오일석 전북대 강의 2장 강의 ppt http://greenpresent.tistory.com/entry/%EC%BB%B4%ED%93%A8%ED%84%B0%EB%B9%84%EC%A0%84%EA%B0%95%EC%9D%98%EC%A0%84%EB%B6%81%EB%8C%802015011620150117

- http://darkpgmr.tistory.com/77

- http://darkpgmr.tistory.com/66?category=460965

- http://blog.daum.net/shksjy/229


---
